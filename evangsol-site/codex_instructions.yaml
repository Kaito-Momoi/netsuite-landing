# codex_instructions.yaml
version: 1
owner: "polarissolutions / EvangSol-site"
purpose: "EvangSol-site の文言・情報設計・ナビ動作の改修一式。ランディング→コーポレート統合、アジャイル導入の方法論追加、各ページ文言更新、実績レイアウト変更。"

repo:
  default_branch: "main"
  working_branch: "feature/evangsol-site-refresh"

run:
  - name: "Create working branch"
    if: "not exists(feature/evangsol-site-refresh)"
    action: "git"
    args: ["checkout", "-b", "feature/evangsol-site-refresh"]

  ###########################################################################
  # 1) 方法論ページ（アジャイルに主軸）を追加
  ###########################################################################
  - name: "Add methodology page (Agile-focused)"
    action: "ensure_file"
    targets:
      - "src/pages/methodology/index.md"
      - "content/methodology.md"
    choose_one: true
    content: |
      ---
      title: "導入方法論"
      description: "アジャイル導入を中心としたNetSuite/Oracle ERP導入の方法論"
      ---

      # 導入方法論（アジャイル中心）

      当社は**アジャイル導入**を中心に、お客様の業務・機能単位で短いサイクルの開発・レビュー・改善を繰り返し、優先度の高い領域から価値を早期にお届けします。  
      変更への強さ、コストパフォーマンス、現場フィードバックの反映を重視します。

      ## 他手法との比較（要点）
      - パッケージ導入（SuiteSuccess）：短期・低コストだがカスタマイズは導入後対応が中心
      - アジャイル導入：柔軟対応・優先度駆動、期間は約3〜9ヶ月が目安
      - ウォーターフォール導入：理想像に近づけやすいが途中変更に弱く長期化しやすい

      ※詳細な比較・成果物の違いは社内資料「アジャイル導入比較まとめ」を要約のうえ掲載しています。:contentReference[oaicite:0]{index=0}

      ## 成果物の考え方
      - 各イテレーションで中間成果物（To-Be構成図、プロセスフロー等）を提示
      - 実機ベースでの確認と現場フィードバックを即時反映
      - 最終成果物は運用イメージに近い形でリリース

      ## どのような案件に適するか
      - 変更が見込まれる領域、現場要件の磨き込みが必要な領域
      - 基幹システムの段階的な刷新／高度化

      > 補足：導入期間・成果物の定義・進行管理の工夫点は個別プロジェクトで明確化します。

  - name: "Link methodology page from navigation"
    action: "text_replace"
    files: ["src/components/Nav*.{tsx,vue,jsx}", "src/layouts/*.{tsx,vue,jsx}", "config/navigation*.{js,ts,json,yml}"]
    find: "(?i)(Methodology|Methods)"
    replace: "導入方法論"

  ###########################################################################
  # 2) ランディングページの内容をコーポレートに統合
  ###########################################################################
  - name: "Merge landing content into corporate pages"
    action: "merge_pages"
    from_candidates:
      - "src/pages/landing/*"
      - "content/landing/*"
      - "src/pages/index.*"
    to_candidates:
      - "src/pages/company/index.*"
      - "src/pages/about/index.*"
      - "content/company.md"
    notes: "重複要素（会社概要、提供価値、CTA）はコーポレート側へ集約。ランディング固有の装飾セクションは削除または簡素化。URL 変更時は 301 を設定。"

  ###########################################################################
  # 3) ページ推移しない場合のアニメーション無効化
  ###########################################################################
  - name: "Disable animations for no-route-change cases"
    action: "code_patch"
    files: ["src/components/*Transition*.{tsx,vue,js}", "src/styles/*animation*.{css,scss}"]
    patch: |
      // ルート未遷移（同一パス内のUI切替）ではアニメーションを適用しない
      // 例: if (router.currentRoute.fullPath === to.fullPath) skip animations
      // CSS 側も .no-anim クラスで transition: none; を適用
    acceptance:
      - "同一ルート内のタブ/アコーディオン等はアニメーションなし"
      - "ページ遷移時のみ最小限のフェードに限定"

  ###########################################################################
  # 4) ホーム：『伝道者』セクションの文言見直し＋案出し
  ###########################################################################
  - name: "Revise '伝道者' section copy"
    action: "text_replace_or_insert"
    files: ["src/pages/index.*", "content/home.md", "src/sections/home/*.{tsx,vue,md}"]
    find: "(?s)伝道者[\\s\\S]{0,400}"
    replace: |
      伝道者
      私たちはテクノロジーの“伝道者”として、単なる導入に留まらず、現場に根付く運用と継続的な価値創出を支援します。
      - 現場主導の改善を後押しするアジャイル導入
      - 事業ゴールから逆算したKPI設計
      - 変化に強い拡張アーキテクチャの設計

    idea_candidates:
      - "顧客の声（1〜2行）のローテーション表示"
      - "『Before→After』の定量カード（在庫回転率・リードタイム短縮など）"
      - "“伝道者の原則” として3〜4項目のピクト＋短文"

  ###########################################################################
  # 5) イントロ文言の全面更新（大手メイン、期間表現の見直し、年数・社数の更新）
  ###########################################################################
  - name: "Intro copy updates"
    action: "structured_copy_update"
    files: ["src/pages/index.*", "src/pages/about/*", "content/intro.md", "src/sections/intro/*.{md,tsx,vue}"]
    updates:
      - find: "最短\\s*3\\s*ヶ月"
        replace: "中長期で腰を据えた基幹刷新を重視"
      - find: "20年以上のOracle\\s*NetSuite"
        replace: "20年以上のOracle ERPソリューション導入経験"
      - find: "(?<![0-9])33,?000社以上"
        replace: "42,000社以上"
      - insert_block_after: "h1|h2:.*(イントロ|Introduction|About)"
        content: |
          当社は**大手企業**を主な対象に、全社レベルの要件にも耐える拡張性・ガバナンス・運用性を前提とした導入をご提供します。
          短期導入を目的化せず、事業成果に直結する中長期の運用価値を重視します。

  ###########################################################################
  # 6) 『強み』ページを『イントロ』へ統合し、強調点を方法論・開発技術へ
  ###########################################################################
  - name: "Merge Strengths into Intro with new emphasis"
    action: "merge_sections"
    from_candidates:
      - "src/pages/strengths/*"
      - "content/strengths.md"
    to_candidates:
      - "src/pages/about/index.*"
      - "content/intro.md"
    keep_highlights:
      - "方法論（アジャイル中心、進行・可視化・受入基準）"
      - "開発技術（拡張・連携・品質管理・自動化）"
    remove_or_rephrase:
      - "設立年の若さを強みとした表現（弱みになるため削除/抑制）"

  ###########################################################################
  # 7) 『実績』：業種・領域はイントロに箇条書きで残し、実績自体は時系列表示へ
  ###########################################################################
  - name: "Refactor achievements layout"
    action: "template_refactor"
    files: ["src/pages/achievements/*", "src/components/Achievement*.{tsx,vue}", "content/achievements/*"]
    goals:
      - "タイムライン（降順）で並べ替え：最新→過去"
      - "各実績カード：年/四半期・業種・規模・概要・主担当領域（要件/設計/開発/移行/保守）をメタとして表示"
      - "業種・領域の総覧はイントロの箇条書きに移設"
    acceptance:
      - "スクリーン幅に応じて2〜3カラム → モバイル1カラム"
      - "タグでフィルタ（業種・領域・期間）"

  ###########################################################################
  # 8) 文章ガイドライン（日本語）
  ###########################################################################
  - name: "Apply copy style guide (JP)"
    action: "lint_copy"
    rules:
      - "数値は半角、単位は半角英字（例：3ヶ月→3か月または“中長期”に置換）"
      - "強調は **太字** のみ。絵文字・過度な装飾禁止"
      - "同義反復を削減（短期/スピード等の強調過多を抑制）"
      - "ファクトは最新版へ（社数、年数など）"

  ###########################################################################
  # 9) ナビ・リンク・メタの整合性
  ###########################################################################
  - name: "Update navigation, links, and redirects"
    action: "sitewide_consistency"
    tasks:
      - "ナビに『導入方法論』を追加、ランディング分離時のリンクを削除/301"
      - "OGP/メタディスクリプションを更新（アジャイル導入を主軸に）"
      - "サイトマップ再生成"

  ###########################################################################
  # 10) ビルド・テスト・アクセシビリティ
  ###########################################################################
  - name: "Build & test"
    action: "ci_commands"
    commands:
      - "npm ci || pnpm i || yarn"
      - "npm run build"
      - "npm run lint"
      - "npm run test --if-present"
    a11y_checklist:
      - "見出し構造の適正（h1は1ページ1つ）"
      - "ボタン/リンクの名前付け明確化"
      - "コントラスト比達成"
      - "アニメーション無効時の操作性維持"

commits:
  - message: "feat(methodology): アジャイル中心の導入方法論ページを新設（比較要約含む）"
  - message: "refactor(site): ランディング内容をコーポレートへ統合＋ナビ更新"
  - message: "fix(ui): ルート未遷移時のアニメーションを無効化"
  - message: "chore(copy): ホーム『伝道者』文言の再設計と改善案追加"
  - message: "chore(copy): イントロの文言更新（大手メイン・年数/社数アップデート）"
  - message: "refactor(content): 『強み』を『イントロ』へ統合、方法論と開発技術を強調"
  - message: "feat(achievements): 実績を時系列レイアウトへ再設計、業種/領域はイントロに集約"

pull_request:
  title: "EvangSol-site リフレッシュ：方法論追加・内容統合・文言更新・実績再設計"
  body: |
    本PRでは以下を実施しました。
    - 導入方法論ページを新設（アジャイル中心、社内資料「アジャイル導入比較まとめ」要約を含む）:contentReference[oaicite:1]{index=1}
    - ランディングの内容をコーポレートへ統合し、冗長要素を整理
    - ページ未遷移時のアニメーションを無効化し、操作性を改善
    - ホーム『伝道者』文言の刷新とUI案の追記
    - イントロ文言：ターゲット（大手中心）、経験表現、社数（42,000+）へ更新
    - 『強み』を『イントロ』に統合し、方法論と開発技術にフォーカス
    - 『実績』は時系列（降順）へレイアウト刷新、フィルタ対応

    受け入れ条件
    - ビルド/リンタ/テストが全て成功すること
    - 既存URLは可能な限り維持、変更時は 301 を設定
    - 主要ページの見出し構造とOGPが更新方針に整合
reviewers:
  - "@k-momoi"
  - "web-team"
labels:
  - "site-refresh"
  - "copywriting"
  - "agile-methodology"
  - "ux"
